<!DOCTYPE html>
<html>
<head>
<title>Character Pane</title>

<style>
.pane {
  width: 800px;
  border: 4px solid #b38f00;  
  border-radius: 12px;
  background: linear-gradient(#1b1b22, #14141a);
  padding: 20px;
  box-shadow: 0 0 15px #000;
  display: flex;
  flex-direction: column;
  align-items: center;
}

.title {
  text-align: center;
  color: gold;
  font-size: 32px;
  margin-bottom: 20px;
  text-shadow: 1px 1px 2px #000;
}

/* Paper doll grid */
.paper-doll {
  display: grid;
  grid-template-columns: 120px 180px 120px;
  grid-template-rows: 120px 180px 120px;
  gap: 15px;
  justify-items: center;
  align-items: center;
  position: relative;
}

/* Place slots around portrait */
#Head { grid-column: 2; grid-row: 1; }
#Neck { grid-column: 2; grid-row: 2; align-self: start; }
#LeftHand { grid-column: 1; grid-row: 2; }
#RightHand { grid-column: 3; grid-row: 2; }
#Chest { grid-column: 2; grid-row: 3; }
#Legs { grid-column: 2; grid-row: 4; }
#Feet { grid-column: 2; grid-row: 5; }

/* Portrait center */
.portrait {
  grid-column: 2;
  grid-row: 2;
  width: 180px;
  height: 180px;
  border: 4px solid gold;
  border-radius: 8px;
  background-size: cover;
  background-position: center;
  box-shadow: 0 0 10px #000 inset;
  z-index: 1;
}

/* Slots style */
.slot {
  width: 100px;
  height: 100px;
  border: 3px solid #b38f00;
  border-radius: 6px;
  background: linear-gradient(#222, #1a1a1a);
  position: relative;
  cursor: pointer;
  overflow: visible;
  box-shadow: 0 0 5px #000 inset;
  transition: all 0.2s ease;
  z-index: 2;
}

.slot img {
  width: 100%;
  height: 100%;
  object-fit: cover;
  pointer-events: none;
  border-radius: 4px;
}

.slot:hover {
  border-color: #fff700;
  box-shadow: 0 0 10px #fff700 inset, 0 0 12px #fff700;
}

.tooltip {
  position: absolute;
  background: #111;
  color: #fff;
  border: 2px solid gold;
  padding: 8px;
  font-size: 16px;
  width: 220px;
  display: none;
  z-index: 999;
  left: 110px;
  top: 0;
  pointer-events: none;
  border-radius: 6px;
  box-shadow: 0 0 10px #000;
}

.slot:hover .tooltip {
  display: block;
}

</style>
</head>

<body>

<div class="pane">
  <div class="title" id="name">Loading...</div>

  <div class="paper-doll">
    <!-- Top slots -->
    <div class="slot" id="Head"><img><div class="tooltip"></div></div>
    <div class="slot" id="Neck"><img><div class="tooltip"></div></div>

    <!-- Portrait center -->
    <div class="portrait" id="portrait"></div>

    <!-- Left & Right -->
    <div class="slot" id="LeftHand"><img><div class="tooltip"></div></div>
    <div class="slot" id="RightHand"><img><div class="tooltip"></div></div>

    <!-- Bottom slots -->
    <div class="slot" id="Chest"><img><div class="tooltip"></div></div>
    <div class="slot" id="Legs"><img><div class="tooltip"></div></div>
    <div class="slot" id="Feet"><img><div class="tooltip"></div></div>
  </div>
</div>

<script>
const charURL = "https://docs.google.com/spreadsheets/d/e/2PACX-1vSuibkGWLHa5Sz7rJtRjgpZUnG6ZNxgtuxfFqiJB_OsUVqmOaxthADcFLJwmWxfAYvPO2zjFLroosZ1/pub?gid=0&single=true&output=csv";
const gearURL = "https://docs.google.com/spreadsheets/d/e/2PACX-1vSuibkGWLHa5Sz7rJtRjgpZUnG6ZNxgtuxfFqiJB_OsUVqmOaxthADcFLJwmWxfAYvPO2zjFLroosZ1/pub?gid=457348905&single=true&output=csv";

function parseCSV(text) {
  return text.trim().split("\n").map(r => r.split(","));
}

fetch(charURL)
.then(r => r.text())
.then(t => {
  const data = {};
  parseCSV(t).forEach(row => data[row[0]] = row[1]);

  document.getElementById("name").innerText = data["Name"];
  document.getElementById("portrait").style.backgroundImage =
    `url(${data["Portrait"]})`;
});

fetch(gearURL)
.then(r => r.text())
.then(t => {
  const rows = parseCSV(t);

  rows.slice(1).forEach(row => {
    const [slot, item, desc, icon] = row;
    const el = document.getElementById(slot);
    if (!el) return;

    el.querySelector("img").src = icon;

    const tip = el.querySelector(".tooltip");
    tip.innerHTML = `<b>${item}</b><br>${desc}`;
  });
});
</script>

</body>
</html>
